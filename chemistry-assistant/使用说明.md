# 化学助手使用说明

## 🎯 系统概述

化学助手是一个基于AI的智能化学学习和分析工具，提供多种化学问题处理功能。

## 🚀 启动方式

### Web界面模式（推荐）
```bash
python main.py
```
启动后访问：http://localhost:7860

### CLI命令行模式
```bash
python main.py --mode cli
```

## 🔧 功能特性

### 1. 智能问答
- **功能**：回答各类化学问题
- **适用场景**：概念解释、理论知识、基础问答
- **示例**："什么是化学键？"、"解释原子结构"

### 2. 化学计算
- **功能**：进行化学相关的数值计算
- **适用场景**：摩尔质量计算、浓度计算、化学方程式配平
- **示例**："计算H2O的摩尔质量"、"平衡方程式：H2 + O2 = H2O"

### 3. LangChain链式处理
- **功能**：使用专业的化学分析链进行深度分析
- **适用场景**：复杂问题分析、多步骤推理、详细解答
- **特点**：
  - 问题分类和难度评估
  - 分步骤分析过程
  - 详细的解答和总结

### 4. 多模态输入
- **功能**：支持图片上传和分析
- **适用场景**：化学结构图分析、实验图片解读
- **支持格式**：JPG、PNG、GIF等常见图片格式

## 🖥️ Web界面使用指南

### 界面布局
- **左侧面板**：功能选择和模型配置
- **中央区域**：问题输入和结果显示
- **右侧面板**：图片上传和附加功能

### 操作步骤
1. **选择功能**：在左侧选择合适的处理方式
   - 智能问答：适合一般性问题
   - 化学计算：适合计算类问题
   - LangChain处理：适合复杂分析

2. **选择模型**：
   - 本地模型：使用本地LLM
   - LangChain链式处理：使用专业化学分析链

3. **输入问题**：在文本框中输入您的化学问题

4. **上传图片**（可选）：如需分析图片，点击上传按钮

5. **提交处理**：点击"提交问题"按钮

6. **查看结果**：
   - 主要回答显示在"回答"区域
   - 对比分析显示在"对比分析"区域
   - 链式处理结果显示在"链式处理"区域

## 📊 功能对比

| 功能 | 智能问答 | 化学计算 | LangChain处理 |
|------|----------|----------|---------------|
| 响应速度 | 快 | 快 | 中等 |
| 分析深度 | 基础 | 专业 | 深度 |
| 适用场景 | 概念问答 | 数值计算 | 复杂分析 |
| 输出格式 | 简洁 | 结构化 | 详细报告 |

## 🔍 使用技巧

### 问题描述建议
1. **明确具体**：描述问题时尽量具体明确
   - ✅ 好："计算NaCl的摩尔质量"
   - ❌ 差："帮我算个东西"

2. **包含关键信息**：提供必要的条件和参数
   - ✅ 好："在标准状态下，1mol理想气体的体积是多少？"
   - ❌ 差："气体体积是多少？"

3. **选择合适功能**：
   - 概念性问题 → 智能问答
   - 计算类问题 → 化学计算
   - 复杂分析 → LangChain处理

### 图片上传建议
1. **清晰度**：确保图片清晰，文字和结构可辨识
2. **格式**：支持JPG、PNG、GIF等格式
3. **内容**：化学结构图、方程式、实验装置图等

## 🛠️ 故障排除

### 常见问题

**Q: 输入问题后没有响应？**
A: 
- 检查网络连接
- 确认问题输入不为空
- 查看浏览器控制台是否有错误信息
- 重新刷新页面

**Q: 回答质量不理想？**
A:
- 尝试更换处理方式（如使用LangChain处理）
- 重新组织问题描述，使其更加具体
- 提供更多背景信息

**Q: 图片上传失败？**
A:
- 检查图片格式是否支持
- 确认图片大小不超过限制
- 尝试压缩图片后重新上传

**Q: 系统响应缓慢？**
A:
- LangChain处理相对较慢，请耐心等待
- 避免同时提交多个复杂问题
- 检查系统资源使用情况

### 日志查看
如需查看详细的系统运行日志，可以在命令行中查看启动程序的输出信息。

## 🔧 技术支持

### 系统要求
- Python 3.8+
- 足够的内存运行本地LLM模型
- 网络连接（用于某些功能）

### 功能测试
可以运行测试脚本验证系统功能：
```bash
python test_functionality.py
```

### 配置文件
- `config/config.yaml`：主要配置文件
- `config/prompts/`：提示词模板
- `data/`：数据文件目录

## 📝 更新日志

### 最新版本特性
- ✅ 修复了Controller初始化问题
- ✅ 增强了错误处理和日志记录
- ✅ 优化了组件初始化顺序
- ✅ 暂时禁用知识库检索功能（后续完善）
- ✅ 改进了Web界面的响应性

### 已知限制
- 知识库检索功能暂时禁用
- 某些复杂计算可能需要较长处理时间
- 图片分析功能依赖于模型能力

---

💡 **提示**：如遇到问题，请先查看控制台日志，大多数问题都会有详细的错误信息帮助诊断。